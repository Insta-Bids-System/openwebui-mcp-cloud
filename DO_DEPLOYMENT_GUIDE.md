# ðŸš€ Complete DigitalOcean Deployment Guide

## Prerequisites Checklist
- [ ] DigitalOcean account with billing enabled
- [ ] Domain name (can use subdomain like ai.yourdomain.com)
- [ ] GitHub account (to store your code)
- [ ] Basic SSH knowledge

## Step 1: Prepare External Services

### Option A: Supabase (Recommended - Free Tier Available)
1. Go to https://supabase.com
2. Create new project
3. Copy PostgreSQL connection string from Settings â†’ Database
4. Format: `postgresql://postgres:[YOUR-PASSWORD]@db.[PROJECT-REF].supabase.co:5432/postgres`

### Option B: DigitalOcean Managed Database
1. Create PostgreSQL cluster ($15/month)
2. Create database named `openwebui`
3. Copy connection string

### Redis Setup (DigitalOcean)
1. Create Managed Redis ($15/month)
2. Copy connection string
3. Add fix: `?ssl_cert_reqs=none&decode_responses=true`

## Step 2: Push Code to GitHub

```bash
cd C:\Users\USER\Documents\openwebui-mcp-cloud
git remote add origin https://github.com/YOUR-USERNAME/openwebui-mcp-cloud.git
git branch -M main
git push -u origin main
```

## Step 3: Create DigitalOcean Droplet

1. Go to DigitalOcean â†’ Create â†’ Droplets
2. Choose:
   - **Image**: Ubuntu 22.04 LTS
   - **Plan**: Basic
   - **CPU**: Regular (Intel/AMD)
   - **Size**: $48/month (4 vCPU, 8GB RAM, 160GB SSD)
   - **Region**: Choose closest to you
   - **VPC**: Default
   - **Authentication**: SSH keys (add your public key)
   - **Hostname**: `openwebui-mcp`
   - **Backups**: Enable ($9.60/month extra)
   - **Tags**: `openwebui`, `mcp`
## Step 4: Initial Server Setup

### SSH into your droplet:
```bash
ssh root@YOUR_DROPLET_IP
```

### Run setup commands:
```bash
# Update system
apt update && apt upgrade -y

# Install Docker (if not pre-installed)
curl -fsSL https://get.docker.com | sh

# Install required tools
apt install -y docker-compose git nginx certbot python3-certbot-nginx

# Clone your repository
cd /root
git clone https://github.com/YOUR-USERNAME/openwebui-mcp-cloud.git
cd openwebui-mcp-cloud

# Make scripts executable
chmod +x scripts/*.sh

# Run setup script
./scripts/setup-droplet.sh
```

## Step 5: Configure Environment

### Edit production environment:
```bash
nano .env.production
```

### Add your actual values:
```env
# Domain
DOMAIN_NAME=ai.yourdomain.com

# Database (from Supabase or DO)
POSTGRES_URL=postgresql://postgres:YOUR_PASSWORD@db.xxxxx.supabase.co:5432/postgres

# Redis (from DO Managed Redis)
REDIS_URL=rediss://default:YOUR_PASSWORD@redis-xxxxx.ondigitalocean.com:25061/0?ssl_cert_reqs=none&decode_responses=true

# Keep the generated keys from setup script
WEBUI_SECRET_KEY=xxxxx
MCP_API_KEY=xxxxx

# FileBrowser (generated by setup)
FB_USERNAME=admin
FB_PASSWORD=xxxxx

# Optional API keys
GITHUB_TOKEN=ghp_xxxxx  # If using GitHub tools
DO_API_TOKEN=dop_xxxxx  # If using DO tools
```
## Step 6: Point Domain to Droplet

1. Go to your domain registrar
2. Add A record:
   - Name: `ai` (or `@` for root domain)
   - Value: `YOUR_DROPLET_IP`
   - TTL: 600

Wait 5-10 minutes for DNS propagation.

## Step 7: Deploy Services

```bash
cd /root/openwebui-mcp-cloud

# Start all services
docker-compose -f docker-compose.production.yml up -d

# Check status
docker-compose -f docker-compose.production.yml ps

# View logs
docker-compose -f docker-compose.production.yml logs -f
```

## Step 8: Setup SSL Certificate

```bash
# Make sure domain is pointing to server first!
certbot --nginx -d ai.yourdomain.com

# Choose options:
# - Enter email
# - Agree to terms
# - Share email: your choice
# - Redirect HTTP to HTTPS: Yes (option 2)
```

## Step 9: Initialize OpenWebUI

1. Open browser: https://ai.yourdomain.com
2. Create admin account (first signup)
3. Go to Settings â†’ Account â†’ API Keys
4. Click "Generate API Key"
5. Copy the generated key

## Step 10: Update MCP Configuration

```bash
# Add API key to environment
nano /root/openwebui-mcp-cloud/.env.production
# Add line: OPENWEBUI_API_KEY=sk-xxxxx

# Restart MCP services
cd /root/openwebui-mcp-cloud
docker-compose -f docker-compose.production.yml restart mcp-server mcpo-openwebui
```
## Step 11: Configure MCP Tools in OpenWebUI

1. Login to OpenWebUI: https://ai.yourdomain.com
2. Go to Settings â†’ Tools
3. Add Tool URL: `http://YOUR_DROPLET_IP:8101`
4. Enable "Auto-append /openapi.json"
5. Click Save

## Step 12: Test Everything

### Test Web Access:
- OpenWebUI: https://ai.yourdomain.com
- FileBrowser: https://ai.yourdomain.com/files (use FB credentials)

### Test MCP Tools in Chat:
- "What tools are available?"
- "List all users"
- "Check system health"
- "Create a file in /workspace"

### Run Health Check:
```bash
/root/openwebui-mcp-cloud/scripts/health-check.sh
```

## Step 13: Setup Automated Backups

```bash
# Add to crontab
crontab -e

# Add line:
0 2 * * * /root/openwebui-mcp-cloud/scripts/backup.sh >> /var/log/backup.log 2>&1

# Save and exit
```

## ðŸŽ‰ Deployment Complete!

Your AI Hub is now live with:
- âœ… OpenWebUI interface
- âœ… 200+ MCP tools
- âœ… Persistent storage
- âœ… SSL encryption
- âœ… Automated backups

## ðŸ“Š Monitoring & Maintenance

### Daily Tasks:
```bash
# Check health
/root/openwebui-mcp-cloud/scripts/health-check.sh

# View logs
cd /root/openwebui-mcp-cloud
docker-compose -f docker-compose.production.yml logs --tail=100
```

### Weekly Tasks:
```bash
# Update services
docker-compose -f docker-compose.production.yml pull
docker-compose -f docker-compose.production.yml up -d

# Check backups
ls -la /data/backups/
```

### Monthly Tasks:
```bash
# System updates
apt update && apt upgrade -y

# Docker cleanup
docker system prune -a

# Review logs for errors
journalctl -u docker --since "1 month ago" | grep -i error
```

## ðŸš¨ Troubleshooting

### If services won't start:
```bash
# Check Docker
systemctl status docker
docker ps -a

# Check logs
docker-compose -f docker-compose.production.yml logs service-name

# Restart everything
docker-compose -f docker-compose.production.yml down
docker-compose -f docker-compose.production.yml up -d
```

### If MCP tools don't work:
1. Verify OPENWEBUI_API_KEY is set correctly
2. Check MCPO is accessible: `curl http://localhost:8101/openapi.json`
3. Restart MCP services
4. Check tool URL uses public IP, not localhost

### If SSL fails:
```bash
# Renew certificate
certbot renew --nginx

# Check nginx
nginx -t
systemctl restart nginx
```

## ðŸ’° Cost Breakdown

### Minimum Setup:
- Droplet (4vCPU/8GB): $48/month
- Backups: $9.60/month
- **Total: ~$58/month**

### With Managed Services:
- Droplet: $48/month
- PostgreSQL: $15/month
- Redis: $15/month
- Backups: $9.60/month
- **Total: ~$88/month**

### Free Alternatives:
- Use Supabase free tier for PostgreSQL
- Skip Redis (optional for small deployments)
- **Reduces to: ~$58/month**

## ðŸ“š Additional Resources

- OpenWebUI Docs: https://docs.openwebui.com
- MCP Protocol: https://modelcontextprotocol.io
- DigitalOcean Tutorials: https://www.digitalocean.com/community/tutorials

---

**Need Help?** Check logs first, then refer to the troubleshooting section!